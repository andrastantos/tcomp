Version 4
SHEET 1 5924 2320
WIRE 240 -432 -752 -432
WIRE 448 -432 240 -432
WIRE 496 -432 448 -432
WIRE 896 -432 496 -432
WIRE 1168 -432 896 -432
WIRE 1424 -432 1168 -432
WIRE 2944 -432 1424 -432
WIRE 896 -400 896 -432
WIRE 240 -336 240 -432
WIRE 448 -336 448 -432
WIRE 1168 -336 1168 -432
WIRE 1424 -336 1424 -432
WIRE 896 -288 896 -320
WIRE 1104 -288 896 -288
WIRE 896 -240 896 -288
WIRE 1168 -192 1168 -240
WIRE 1168 -192 960 -192
WIRE 240 -80 240 -256
WIRE 176 -32 32 -32
WIRE 896 -16 896 -144
WIRE 896 -16 784 -16
WIRE 992 -16 896 -16
WIRE 448 64 448 -256
WIRE 384 112 160 112
WIRE 784 144 784 -16
WIRE 992 144 992 -16
WIRE 240 192 240 16
WIRE 720 192 240 192
WIRE 1088 192 1056 192
WIRE -256 224 -480 224
WIRE -144 224 -256 224
WIRE 32 224 32 -32
WIRE 32 224 -64 224
WIRE -256 272 -336 272
WIRE 16 272 -256 272
WIRE 160 272 160 112
WIRE 160 272 96 272
WIRE 448 272 448 160
WIRE 544 272 448 272
WIRE 1088 272 1088 192
WIRE 1088 272 544 272
WIRE 1424 272 1424 -256
WIRE 992 320 992 240
WIRE 1072 320 992 320
WIRE 1136 320 1072 320
WIRE 1360 320 1136 320
WIRE -752 336 -752 -432
WIRE -480 336 -480 224
WIRE -336 336 -336 272
WIRE 784 352 784 240
WIRE 992 352 992 320
WIRE 240 368 240 192
WIRE 448 368 448 272
WIRE 1168 416 1168 -192
WIRE 1264 416 1168 416
WIRE 784 448 784 432
WIRE 880 448 784 448
WIRE 1424 448 1424 368
WIRE 1536 448 1424 448
WIRE 1600 448 1536 448
WIRE 1168 464 1168 416
WIRE 1264 464 1264 416
WIRE -480 496 -480 416
WIRE -416 496 -480 496
WIRE -336 496 -336 416
WIRE -336 496 -416 496
WIRE 784 496 784 448
WIRE 992 496 992 432
WIRE 1424 512 1424 448
WIRE 880 544 880 448
WIRE 880 544 848 544
WIRE 928 544 880 544
WIRE -416 560 -416 496
WIRE 784 688 784 592
WIRE 896 688 784 688
WIRE 992 688 992 592
WIRE 992 688 896 688
WIRE -752 720 -752 416
WIRE -416 720 -416 640
WIRE -416 720 -752 720
WIRE 240 720 240 448
WIRE 240 720 -416 720
WIRE 448 720 448 448
WIRE 448 720 240 720
WIRE 896 720 896 688
WIRE 896 720 448 720
WIRE 1104 720 896 720
WIRE 1168 720 1168 544
WIRE 1168 720 1104 720
WIRE 1264 720 1264 528
WIRE 1264 720 1168 720
WIRE 1424 720 1424 592
WIRE 1424 720 1264 720
WIRE 2096 720 1424 720
WIRE 1104 768 1104 720
WIRE 544 848 544 272
WIRE 608 848 544 848
WIRE 800 848 672 848
WIRE 1072 848 1072 320
WIRE 1072 848 880 848
WIRE 544 1008 544 848
WIRE 768 1008 544 1008
WIRE 1072 1008 1072 848
WIRE 1072 1008 832 1008
FLAG 1136 320 OUT
FLAG 1104 768 0
FLAG -256 224 IN_P
FLAG -256 272 IN_N
FLAG 496 -432 VCC
FLAG 1536 448 OUT2
SYMBOL res 1152 448 R0
SYMATTR InstName R1
SYMATTR Value 22k
SYMBOL voltage -480 320 R0
WINDOW 3 -47 -133 VRight 2
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 {Vdiff} {f_diff} 0 0 0)
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMBOL voltage -336 320 R0
WINDOW 3 -47 -145 VRight 2
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 {Vdiff} {f_diff} 0 0 180)
SYMATTR Value2 AC 1 180
SYMATTR InstName V2
SYMBOL voltage -752 320 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {VCC}
SYMBOL voltage -416 544 R0
WINDOW 3 -47 -145 VRight 2
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value SINE({Vcm} {Vdd} 0 0 0 180)
SYMATTR InstName V4
SYMBOL res 112 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {Rin}
SYMBOL res -48 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value {Rin}
SYMBOL cap 1248 464 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL res 432 352 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res 224 352 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL npn2 384 64 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL npn2 176 -80 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL res 432 -352 R0
SYMATTR InstName R12
SYMATTR Value 100
SYMBOL res 224 -352 R0
SYMATTR InstName R13
SYMATTR Value 100
SYMBOL npn2 928 496 R0
SYMATTR InstName Q12
SYMATTR Value 2N3904
SYMBOL npn2 848 496 M0
SYMATTR InstName Q13
SYMATTR Value 2N3904
SYMBOL pnp 960 -144 R180
SYMATTR InstName Q14
SYMATTR Value 2N3906
SYMBOL pnp 1104 -240 M180
SYMATTR InstName Q15
SYMATTR Value 2N3906
SYMBOL res 880 -416 R0
SYMATTR InstName R18
SYMATTR Value 150
SYMBOL pnp 720 240 M180
SYMATTR InstName Q16
SYMATTR Value 2N3906
SYMBOL pnp 1056 240 R180
SYMATTR InstName Q17
SYMATTR Value 2N3906
SYMBOL res 1408 496 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 1408 -352 R0
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL npn2 1360 272 R0
SYMATTR InstName Q5
SYMATTR Value 2N3904
SYMBOL res 768 336 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 896 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL cap 672 832 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL cap 832 992 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 100p
SYMBOL res 976 336 R0
SYMATTR InstName R8
SYMATTR Value 1k
TEXT -784 792 Left 2 ;.tran {max(10m, 10/f_diff)}
TEXT -632 -320 Left 2 !.param VCC=10
TEXT -632 -288 Left 2 !.param Ri=250
TEXT -632 -256 Left 2 !.param Vcm=5
TEXT -632 -224 Left 2 !.param Vdiff=10m
TEXT -360 -64 Left 2 !;.step param f_diff 1k 1001k 100k
TEXT -632 -192 Left 2 !.param Vdd=10m
TEXT -784 816 Left 2 ;.ac dec 100 1u 1000mega
TEXT -632 -160 Left 2 !.param Lb=3m
TEXT -728 -816 Left 2 ;Based on https://sound-au.com/project07.htm\n \nA databook with tons of good design info:\nhttp://www.bitsavers.org/components/ti/_dataBooks/1974_TI_Linear_and_Interface_Circuits_Applications.pdf\nhttp://www.bitsavers.org/components/ti/_dataBooks/1977_TI_Memory_Interface_Data_Book.pdf\n \nSpecifically:\n- DC termination on the intput of about 100ohm (external)\n- Input bias current of 25-50uA\n \nWe seem to be meeting these...\n \n- Thershold accuracy of about 1-3mV\n- (They) depending on resistor ratios to achieve that.\n- (They) don't use window-comparators
TEXT -632 -128 Left 2 !.param Rin=10k
TEXT 536 -640 Left 2 ;Common current source needs about 2.5V to operate\nTop current mirror needs about 1.2V to operate\nAs such, 5V operation is not really possible.
TEXT -632 -64 Left 2 !.param f_diff=1mega
TEXT -360 -128 Left 2 !;step param Rin 1k 10k 1k
TEXT -360 -256 Left 2 !;.step param Vcm 3 7 1
TEXT -360 -224 Left 2 !.step param Vdiff 0 50m 10m
TEXT -784 840 Left 2 !.tran {10/f_diff}
